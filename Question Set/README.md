## C语言题集 收录了做题过程中的错题、重点题

### 一、选择题

#### 1. 下面能正确进行字符串赋值操作的语句是（C）

A. `char s[5] = {"ABCDEF"};`
B. `char s[5] = {'A','B','C','D','E'};`
C. `char *s; s = "ABCDEF";`
D. `char *s; scanf("%s", s);`

#### 2. C语言中的文件类型只有（D）

A. 索引文件和文本文件两种
B. 文本文件一种
C. 二进制文件一种
D. ASCII码文件和二进制文件两种

### 二、填空题

#### 1. 假设int类型的变量占用两个字节，若有定义：`int x[10] = {0,2,4};`，则数组x在内存中所占字节数是<u>20</u>。
> 解析：数组x作为自动变量，其占用的内存空间是在编译时确定与分配的，因此占用的字节数为20。

#### 2. 设fp为指向某二进制文件的指针，且已读到此文件结尾，则函数`feof(fp)`的返回值是<u>非0值</u>。
> 解析：当上一次输入调用检测到文件结尾时，`feof()`返回一个非0值，否则返回0。

#### 3. 设有如下定义，则变量b占用内存的字节数为<u>4</u>。

```c
union data{
    int i;  //假设int类型占2字节
    char ch;//假设char类型占1字节
    float f;//假设float类型占4字节
}
```
> 解析：编译器会为联合类型的变量分配足够的空间以便它能储存联合变量中占用最大字节的类型。

#### 4. 下列程序段的输出结果是<u>8</u>。

```c
char a = 010, b = 10;
printf("%d\n", a&b<<2);
```
> 解析：将八进制数010赋值给变量a，将十进制值10赋值给变量b，八进制值010转换成二进制值为1000，十进制值10转换成二进制值为1010，左移2位后为1000，因此`a&b<<2`的值为二进制值1000，即十进制值10。

#### 5. 有定义：`int a[][3] = {1,2,3,4,5,6,8,9,10};`，则`printf("%d", *(*(a+1)+2));`语句的输出结果为<u>6</u>。
> 解析：a是二维数组，所以a是其首元素`a[0]`这一一维数组元素的地址，`a+1`即一维数组元素`a[1]`的地址，`*(a+1)`就是`a[1][0]`的地址，因此`*(a+1)+2`就是`a[1][2]`的地址，`*(*(a+1)+2)`就是`a[1][2]`的元素值，即6。

#### 6. C语言规定：在一个源程序中，main函数的位置可以是<u>任意的</u>。
> 解析：main函数可以放在程序最前面，也可以放在程序最后，或在一些函数之前、另一些函数之后，因此其位置可以是任意的。

### 三、判断题

#### 1. else语句一定要与if语句配对使用，程序中else语句的数量一定小于或者等于if语句的数量。（✔️）

#### 2. 从狭义的角度讲，算法是解决一个问题采取的方法和步骤的描述。（✔️）

#### 3. 在不得已的情况下（例如提高程序运行效率），才使用goto语句（❌）

#### 4. 条件表达式可以取代if语句，或者用if语句取代条件表达式（❌）

#### 5. 可以对字符型数组进行整体输入和输出（✔️）

#### 6. 系统不允许用户重新定义标准库函数（✔️）

#### 7. C语言中结构体的类型只有一种（❌）

>结构体是一种数据结构，可以声明为变量、指针和数组等。

#### 8. C语言规定，else总是与它上面的、最近的、尚未配对的if配对（✔️）

>当if被{}嵌套时，else与前面最近的未被{}包裹的if配对。

#### 9. 由`float x = 3e-6, y = 3e-6;`可得`x == y`的逻辑值总是为真（❌）

>关系运算符可以用来比较浮点数，但是比较浮点数时尽量只使用&lt;和&gt;。因为浮点数的舍入误差会导致在逻辑上本应相等的两数却不相等。

#### 10. 可以在赋值语句中通过赋值运算符`=`对字符数组进行整体赋值（❌）

>只能在字符数组声明时进行整体赋值的初始化 操作。然而声明时初始化并不是赋值语句，赋值语句的格式为`赋值表达式;`，赋值表达式是由赋值运算符、可修改的左值和表达式的值组成的，而声明中赋值运算符左侧并不是可修改的左值。为什么说声明不是语句呢，语句的形式是`表达式;`，将声明中的分号去掉后剩下的部分并不是一个表达式，表达式是由运算对象与运算符构成的，声明中的类型说明符并不是运算符，因此声明不是语句。

### 四、简答题

#### 1. 二进制文件和文本文件有什么区别？

二进制文件中的内容是由二进制值所表示的机器代码或或图片或影像编码等二进制内容。文本文件中的内容是由二进制值所表示的文本内容。

#### 2. 二进制流和文本流有什么区别？

区别在于在读写流时程序执行的转换。二进制流不执行转换，文本流可能转换换行符和其他字符。

#### 3. 分别用`fprintf()`和`fwrite()`储存8238201有何区别？

使用`fprintf()`储存8238201时，将其视为7个字符，保存在7个字节中。用`fwrite()`储存时，使用该数的二进制表示，将其储存为一个4字节整数。

#### 4. 分别用`putc()`和`fwrite()`储存字符S有何区别？

没有区别，都是将其储存为一个单字节的二进制码。

#### 5. 下面语句的区别是什么？

```c
printf("Hello, %s\n", name);
fprintf(stdout, "Hello, %s\n", name);
fprintf(stderr, "Hello, %s\n", name);
```

第1条语句是第2条语句的速记表示。第3条语句将消息输出到标准错误上。通常，标准错误被定向到与标准输出相同的位置。但是标准错误不受标准输出重定向的影响。

#### 6. "a+"、"r+"和"w+"模式打开的文件都是可读写的。哪种模式更适合用来更改文件中的已有内容？

可以使用"r+"模式更改文件中的已有内容。该模式不仅不会将文件长度截为0，而且支持从任意位置插入新内容。"a+"模式不会将文件长度截为0，而且可以读整个文件，但是只能从末尾添加内容弄。而"w+"模式会将文件长度截为0。"a+"和"w+"模式不符合题意，因此使用"r+"模式更适合更改文件的现有内容。

### 五、程序运行结果

### 六、程序设计题

#### 1. 有一口深度为h米的水井，井底有一只青蛙，它每个白天能够沿井壁向上爬m米，夜里则顺井壁向下滑n米，若青蛙从某个早晨开始向外爬，试编写一个函数：对于任意指定的h，m，n值（均为自然数），计算青蛙多少天能够爬出井口。并简要说明程序实现的基本思想。
解析：让青蛙每天向上爬积累的总距离与井的高度进行比较，使用循环模拟青蛙每天向上爬，每循环一次，天数自增1，同时还要考虑青蛙白天就可以爬出井的情况以及下滑至井底的情况。

```c
int climb(int h, int m, int n)
{
    int days = 1, mile = m;

    while (mile <= h)
    {
        mile -= n;
        if (mile < 0)
            mile = 0;
        days++;
        mile += m;
    }

    return days;
}
```

#### 2. 写一个函数，对整数型数组进行排序，要求：
+ 函数原型为 `void sort(int length, int *data);`，lengeh为数组的长度。
+ 函数需要区分数组中的奇数和偶数：排序后，奇数从大到小排列于数组的前端，偶数从小到大排列于数组的后端。

```c
void sort(int length, int *data)
{
    int temp, i, j;

    for (i = 0; i < length - 1; i++)
    {
        for (j = i + 1; j < length; j++)
            if ((data[j] > data[i] || data[i] % 2 != 1) && data[j] % 2 == 1)
            {
                temp = data[j];
                data[j] = data[i];
                data[i] = temp;
            }
        if (data[i] % 2 != 1)
            break;
    }

    for (; i < length - 1; i++)
        for (j = i + 1; j < length; j++)
            if (data[j] < data[i])
            {
                temp = data[j];
                data[j] = data[i];
                data[i] = temp;
            }
}
```

#### 3. 编写一个函数ShowTxt，把任一个给定的文件名的字符文件的内容显示在计算机屏幕上。

```c
void ShowTxt(char *fn)
{
    FILE *fp;
    char c;

    if ((fp = fopen(fn, "r")) == NULL)
    {
        fprintf(stderr, "Cannot open file %s.\n", fn);
        exit(EXIT_FAILURE);
    }

    while ((c = getc(fp)) != EOF)
        putc(c, stdout);
}
```

#### 4. 已知D盘根目录下有一名为data1.txt的文件，其内容为：包含空格、回车和大小写英文字母的文本。请编写完整的C代码程序，去除该文本中的所有回车，并将大写英文字母都改为对应的小写字母。最终，将转换好的文本保存在当前目录下一个名为data2.txt的文本文件中。

```c
#include <stdio.h>
#include <stdlib.h>

int main(void)
{
    char *read = "D:\\\\data1.txt", *write = "D:\\\\data2.txt";
    FILE *r, *w;
    char ch;
    long pos;

    if ((r = fopen(read, "r+")) == NULL)
    {
        fprintf(stderr, "Cannot open file %s.\n", read);
        exit(EXIT_FAILURE);
    }

    pos = ftell(r);
    while ((ch = getc(r)) != EOF)
    {
        fseek(r, -1L, SEEK_CUR);
        putc('\0', r);
        if (ch != '\n' && ch != '\0')
        {
            ch = (ch >= 'A' && ch <= 'Z') ? ch + 32 : ch;
            fseek(r, pos, SEEK_SET);
            putc(ch, r);
            pos = ftell(r);
        }
    }

    if ((w = fopen(write, "w")) == NULL)
    {
        fprintf(stderr, "Cannot open file %s.\n", write);
        exit(EXIT_FAILURE);
    }

    fseek(r, 0L, SEEK_SET);
    while ((ch = getc(r)) != EOF)
        putc(ch, w);

    fclose(r);
    fclose(w);

    return 0;
}
```